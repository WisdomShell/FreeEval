{% extends "base.html" %}

{% block title %}Human Evaluation - FreeEval Visualizer{% endblock %}

{% block content %}
<section class="bg-white dark:bg-gray-900">
    <div class="py-8 lg:py-16 px-4 mx-auto max-w-screen-md">
        <h2 class="mb-4 text-4xl tracking-tight font-extrabold text-center text-gray-900 dark:text-white">Human Evaluation</h2>
        <p class="mb-8 lg:mb-16 font-light text-center text-gray-500 dark:text-gray-400 sm:text-xl">Create a new annotation session or load an existing one to start evaluating cases.</p>
        <form id="human-evaluation-form" method="POST" action="{{ url_for('main.human_evaluation') }}" class="space-y-8">
            <div>
                <label for="session_name" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Session Name</label>
                <input type="text" id="session_name" name="session_name" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" placeholder="Enter session name" required>
            </div>
            <div>
                <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Evaluation Type</label>
                <div class="flex items-center mb-4">
                    <input type="radio" id="pairwise" name="evaluation_type" value="pairwise" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" required>
                    <label for="pairwise" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Pairwise Comparison</label>
                </div>
                <div class="flex items-center">
                    <input type="radio" id="scoring" name="evaluation_type" value="scoring" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600" required>
                    <label for="scoring" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Scoring</label>
                </div>
            </div>
            <div id="pairwise_options" class="hidden space-y-4">
                <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Pairwise Options</label>
                <div class="space-y-2">
                    <div class="flex items-center">
                        <input type="checkbox" id="option1" name="pairwise_options" value="Response 1 is better" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option1" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Response 1 is better</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="option2" name="pairwise_options" value="Response 2 is better" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option2" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Response 2 is better</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="option3" name="pairwise_options" value="Tie" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option3" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Tie</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="option4" name="pairwise_options" value="Both Good" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option4" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Both Good</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="option5" name="pairwise_options" value="Both Bad" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option5" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Both Bad</label>
                    </div>
                    <div class="flex items-center">
                        <input type="checkbox" id="option6" name="pairwise_options" value="Not Sure" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                        <label for="option6" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Not Sure</label>
                    </div>
                </div>
                <div class="flex items-center">
                    <input type="checkbox" id="random_swap" name="random_swap" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="random_swap" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Randomly swap order of responses</label>
                </div>
            </div>
            <div id="scoring_options" class="hidden space-y-4">
                <label class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Scoring Type</label>
                <div class="flex items-center mb-4">
                    <input type="radio" id="discrete" name="scoring_type" value="discrete" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="discrete" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Discrete Scores</label>
                </div>
                <div class="flex items-center">
                    <input type="radio" id="continuous" name="scoring_type" value="continuous" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                    <label for="continuous" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Continuous Range</label>
                </div>
                <div id="discrete_scores" class="hidden">
                    <label for="allowed_scores" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Allowed Scores (comma-separated)</label>
                    <input type="text" id="allowed_scores" name="allowed_scores" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" placeholder="1,3,5">
                </div>
                <div id="continuous_range" class="hidden space-y-4">
                    <div>
                        <label for="min_score" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Minimum Score</label>
                        <input type="number" id="min_score" name="min_score" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" placeholder="1">
                    </div>
                    <div>
                        <label for="max_score" class="block mb-2 text-sm font-medium text-gray-900 dark:text-gray-300">Maximum Score</label>
                        <input type="number" id="max_score" name="max_score" class="shadow-sm bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 dark:shadow-sm-light" placeholder="5">
                    </div>
                </div>
            </div>
            <div class="flex items-center">
                <input type="checkbox" id="hide_scores" name="hide_scores" class="w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600">
                <label for="hide_scores" class="ml-2 text-sm font-medium text-gray-900 dark:text-gray-300">Hide evaluation results</label>
            </div>
            <!-- <button type="submit" class="py-3 px-5 text-sm font-medium text-center text-white rounded-lg bg-primary-700 sm:w-fit hover:bg-primary-800 focus:ring-4 focus:outline-none focus:ring-primary-300 dark:bg-primary-600 dark:hover:bg-primary-700 dark:focus:ring-primary-800">Create or Load Existing Annotation Session</button> -->
            <!-- Add this button at the end of the form, just before the closing </form> tag -->
            <button type="submit" class="text-white bg-blue-700 hover:bg-blue-800 focus:outline-none focus:ring-4 focus:ring-blue-300 font-medium rounded-full text-sm px-5 py-2.5 text-center me-2 mb-2 dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Create or Load Annotation Session</button>
        </form>
    </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const evaluationType = document.querySelectorAll('input[name="evaluation_type"]');
    const pairwiseOptions = document.getElementById('pairwise_options');
    const scoringOptions = document.getElementById('scoring_options');
    const scoringType = document.querySelectorAll('input[name="scoring_type"]');
    const discreteScores = document.getElementById('discrete_scores');
    const continuousRange = document.getElementById('continuous_range');

    evaluationType.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'pairwise') {
                pairwiseOptions.classList.remove('hidden');
                scoringOptions.classList.add('hidden');
            } else if (this.value === 'scoring') {
                pairwiseOptions.classList.add('hidden');
                scoringOptions.classList.remove('hidden');
            }
        });
    });

    scoringType.forEach(function(radio) {
        radio.addEventListener('change', function() {
            if (this.value === 'discrete') {
                discreteScores.classList.remove('hidden');
                continuousRange.classList.add('hidden');
            } else if (this.value === 'continuous') {
                discreteScores.classList.add('hidden');
                continuousRange.classList.remove('hidden');
            }
        });
    });
});
</script>
{% endblock %}